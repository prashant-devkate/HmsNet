2025-07-22 14:51:13.236 +05:30 [INF] Executed DbCommand (651ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HMSDB];
2025-07-22 14:51:13.557 +05:30 [INF] Executed DbCommand (227ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HMSDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-07-22 14:51:13.591 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 14:51:13.595 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-22 14:51:13.650 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-22 14:51:13.740 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-22 14:51:13.754 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 14:51:13.755 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-22 14:51:13.771 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-22 14:51:13.787 +05:30 [INF] Applying migration '20250722092104_InitCreate'.
2025-07-22 14:51:13.821 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Username] nvarchar(100) NOT NULL,
    [Firstname] nvarchar(100) NOT NULL,
    [Lastname] nvarchar(100) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [Role] nvarchar(50) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
);
2025-07-22 14:51:13.903 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'UserId', N'CreatedAt', N'Email', N'Firstname', N'Lastname', N'PasswordHash', N'Role', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([UserId], [CreatedAt], [Email], [Firstname], [Lastname], [PasswordHash], [Role], [Username])
VALUES (1, '2024-01-01T00:00:00.0000000Z', N'admin.helpdesk@gmail.com', N'Admin', N'Admin', N'hashed-password', N'Admin', N'admin');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'UserId', N'CreatedAt', N'Email', N'Firstname', N'Lastname', N'PasswordHash', N'Role', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-07-22 14:51:13.906 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250722092104_InitCreate', N'9.0.7');
2025-07-22 14:51:13.913 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-22 14:56:47.864 +05:30 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 14:56:48.421 +05:30 [FTL] Application startup exception
System.InvalidOperationException: An error occurred when configuring the exception handler middleware. Either the 'ExceptionHandlingPath' or the 'ExceptionHandler' property must be set in 'UseExceptionHandler()'. Alternatively, set one of the aforementioned properties in 'Startup.ConfigureServices' as follows: 'services.AddExceptionHandler(options => { ... });' or configure to generate a 'ProblemDetails' response in 'service.AddProblemDetails()'.
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl..ctor(RequestDelegate next, ILoggerFactory loggerFactory, IOptions`1 options, DiagnosticListener diagnosticListener, IEnumerable`1 exceptionHandlers, IMeterFactory meterFactory, IProblemDetailsService problemDetailsService)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware..ctor(RequestDelegate next, ILoggerFactory loggerFactory, IOptions`1 options, DiagnosticListener diagnosticListener)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-07-22 14:56:48.526 +05:30 [ERR] Hosting failed to start
System.InvalidOperationException: An error occurred when configuring the exception handler middleware. Either the 'ExceptionHandlingPath' or the 'ExceptionHandler' property must be set in 'UseExceptionHandler()'. Alternatively, set one of the aforementioned properties in 'Startup.ConfigureServices' as follows: 'services.AddExceptionHandler(options => { ... });' or configure to generate a 'ProblemDetails' response in 'service.AddProblemDetails()'.
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl..ctor(RequestDelegate next, ILoggerFactory loggerFactory, IOptions`1 options, DiagnosticListener diagnosticListener, IEnumerable`1 exceptionHandlers, IMeterFactory meterFactory, IProblemDetailsService problemDetailsService)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware..ctor(RequestDelegate next, ILoggerFactory loggerFactory, IOptions`1 options, DiagnosticListener diagnosticListener)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-07-22 14:59:15.131 +05:30 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 14:59:16.106 +05:30 [INF] Now listening on: http://localhost:5236
2025-07-22 14:59:16.771 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-22 14:59:16.771 +05:30 [INF] Hosting environment: Development
2025-07-22 14:59:16.771 +05:30 [INF] Content root path: C:\Users\Admin\source\repos\HmsNet\HmsNet
2025-07-22 14:59:16.770 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger - null null
2025-07-22 14:59:17.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger - 301 0 null 462.2671ms
2025-07-22 14:59:17.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2025-07-22 14:59:17.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 203.9109ms
2025-07-22 14:59:17.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-bundle.js - null null
2025-07-22 14:59:17.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-standalone-preset.js - null null
2025-07-22 14:59:17.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2025-07-22 14:59:17.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/_framework/aspnetcore-browser-refresh.js - null null
2025-07-22 14:59:17.485 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 28.6931ms
2025-07-22 14:59:17.693 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-07-22 14:59:17.693 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-07-22 14:59:17.697 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 243.204ms
2025-07-22 14:59:17.697 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 200 152034 text/css 242.9077ms
2025-07-22 14:59:17.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/_vs/browserLink - null null
2025-07-22 14:59:17.774 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-07-22 14:59:17.774 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 320.4021ms
2025-07-22 14:59:17.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/_vs/browserLink - 200 null text/javascript; charset=UTF-8 178.5749ms
2025-07-22 14:59:18.242 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2025-07-22 14:59:18.249 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/favicon-32x32.png - null null
2025-07-22 14:59:18.252 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-07-22 14:59:18.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/favicon-32x32.png - 200 628 image/png 8.8935ms
2025-07-22 14:59:18.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.6287ms
2025-07-22 15:00:07.656 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/Auth/register - application/json 143
2025-07-22 15:00:07.689 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-22 15:00:07.707 +05:30 [INF] CORS policy execution failed.
2025-07-22 15:00:07.708 +05:30 [INF] Request origin http://localhost:5236 does not have permission to access the resource.
2025-07-22 15:00:07.969 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:00:08.038 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HmsNet.Models.DTO.RegisterDto) on controller AuthNet.Controllers.AuthController (HmsNet).
2025-07-22 15:00:08.063 +05:30 [INF] Executed action AuthNet.Controllers.AuthController.Register (HmsNet) in 13.8425ms
2025-07-22 15:00:08.067 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:00:08.077 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'HmsNet.Services.AuthService' while attempting to activate 'AuthNet.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-22 15:00:08.205 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/Auth/register - 500 null application/json 548.4716ms
2025-07-22 15:01:22.579 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/Auth/register - application/json 143
2025-07-22 15:01:22.586 +05:30 [INF] CORS policy execution failed.
2025-07-22 15:01:22.588 +05:30 [INF] Request origin http://localhost:5236 does not have permission to access the resource.
2025-07-22 15:01:22.606 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:01:22.606 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HmsNet.Models.DTO.RegisterDto) on controller AuthNet.Controllers.AuthController (HmsNet).
2025-07-22 15:01:22.620 +05:30 [INF] Executed action AuthNet.Controllers.AuthController.Register (HmsNet) in 13.7152ms
2025-07-22 15:01:22.621 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:01:22.624 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'HmsNet.Services.AuthService' while attempting to activate 'AuthNet.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-22 15:01:22.626 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/Auth/register - 500 null application/json 47.1804ms
2025-07-22 15:01:23.655 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/Auth/register - application/json 143
2025-07-22 15:01:23.656 +05:30 [INF] CORS policy execution failed.
2025-07-22 15:01:23.656 +05:30 [INF] Request origin http://localhost:5236 does not have permission to access the resource.
2025-07-22 15:01:23.661 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:01:23.661 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HmsNet.Models.DTO.RegisterDto) on controller AuthNet.Controllers.AuthController (HmsNet).
2025-07-22 15:01:23.662 +05:30 [INF] Executed action AuthNet.Controllers.AuthController.Register (HmsNet) in 1.0881ms
2025-07-22 15:01:23.663 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:01:23.664 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'HmsNet.Services.AuthService' while attempting to activate 'AuthNet.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-22 15:01:23.665 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/Auth/register - 500 null application/json 10.6588ms
2025-07-22 15:02:23.697 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/Auth/register - application/json 143
2025-07-22 15:02:23.698 +05:30 [INF] CORS policy execution failed.
2025-07-22 15:02:23.699 +05:30 [INF] Request origin http://localhost:5236 does not have permission to access the resource.
2025-07-22 15:02:23.699 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:02:23.699 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HmsNet.Models.DTO.RegisterDto) on controller AuthNet.Controllers.AuthController (HmsNet).
2025-07-22 15:02:23.700 +05:30 [INF] Executed action AuthNet.Controllers.AuthController.Register (HmsNet) in 1.2061ms
2025-07-22 15:02:23.713 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:02:23.718 +05:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'HmsNet.Services.AuthService' while attempting to activate 'AuthNet.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-22 15:02:23.719 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/Auth/register - 500 null application/json 22.128ms
2025-07-22 15:15:41.961 +05:30 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-22 15:15:42.320 +05:30 [INF] Now listening on: http://localhost:5236
2025-07-22 15:15:42.682 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-22 15:15:42.682 +05:30 [INF] Hosting environment: Development
2025-07-22 15:15:42.683 +05:30 [INF] Content root path: C:\Users\Admin\source\repos\HmsNet\HmsNet
2025-07-22 15:15:43.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2025-07-22 15:15:44.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 750.0316ms
2025-07-22 15:15:44.559 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/_framework/aspnetcore-browser-refresh.js - null null
2025-07-22 15:15:44.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/_framework/aspnetcore-browser-refresh.js - 200 16497 application/javascript; charset=utf-8 6.4236ms
2025-07-22 15:15:44.626 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/_vs/browserLink - null null
2025-07-22 15:15:45.220 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/_vs/browserLink - 200 null text/javascript; charset=UTF-8 593.7125ms
2025-07-22 15:15:45.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2025-07-22 15:15:45.381 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.1419ms
2025-07-22 15:16:21.142 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/Auth/register - application/json 127
2025-07-22 15:16:21.180 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-22 15:16:21.199 +05:30 [INF] CORS policy execution failed.
2025-07-22 15:16:21.199 +05:30 [INF] Request origin http://localhost:5236 does not have permission to access the resource.
2025-07-22 15:16:21.392 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:16:21.496 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HmsNet.Models.DTO.RegisterDto) on controller AuthNet.Controllers.AuthController (HmsNet).
2025-07-22 15:16:26.541 +05:30 [INF] Executed DbCommand (158ms) [Parameters=[@__user_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__user_Username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-22 15:16:26.835 +05:30 [INF] Executed DbCommand (189ms) [Parameters=[@__user_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__user_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-22 15:16:27.666 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 100), @p4='?' (Size = 4000), @p5='?' (Size = 50), @p6='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [Firstname], [Lastname], [PasswordHash], [Role], [Username])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-07-22 15:16:27.800 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-22 15:16:27.815 +05:30 [INF] Executed action AuthNet.Controllers.AuthController.Register (HmsNet) in 6310.5142ms
2025-07-22 15:16:27.817 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.AuthController.Register (HmsNet)'
2025-07-22 15:16:27.903 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/Auth/register - 200 null text/plain; charset=utf-8 6762.2879ms
2025-07-22 15:16:48.832 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/Auth/login - application/json 42
2025-07-22 15:16:48.838 +05:30 [INF] CORS policy execution failed.
2025-07-22 15:16:48.839 +05:30 [INF] Request origin http://localhost:5236 does not have permission to access the resource.
2025-07-22 15:16:48.842 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.AuthController.Login (HmsNet)'
2025-07-22 15:16:48.884 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HmsNet.Models.DTO.LoginDto) on controller AuthNet.Controllers.AuthController (HmsNet).
2025-07-22 15:16:49.155 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[CreatedAt], [u].[Email], [u].[Firstname], [u].[Lastname], [u].[PasswordHash], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-07-22 15:16:49.678 +05:30 [INF] Executing OkObjectResult, writing value of type 'HmsNet.Models.DTO.ServiceResponse`1[[HmsNet.Models.DTO.LoginResponseDto, HmsNet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-22 15:16:49.700 +05:30 [INF] Executed action AuthNet.Controllers.AuthController.Login (HmsNet) in 814.9307ms
2025-07-22 15:16:49.700 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.AuthController.Login (HmsNet)'
2025-07-22 15:16:49.706 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/Auth/login - 200 null application/json; charset=utf-8 873.9316ms
2025-07-22 15:17:00.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/Users - null null
2025-07-22 15:17:00.621 +05:30 [INF] Executing endpoint 'AuthNet.Controllers.UsersController.GetAll (HmsNet)'
2025-07-22 15:17:00.630 +05:30 [INF] Route matched with {action = "GetAll", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller AuthNet.Controllers.UsersController (HmsNet).
2025-07-22 15:17:00.871 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[Username], [u].[Firstname], [u].[Lastname], [u].[Email], [u].[Role], [u].[CreatedAt]
FROM [Users] AS [u]
2025-07-22 15:17:00.875 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HmsNet.Models.DTO.UserViewModel, HmsNet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-22 15:17:00.890 +05:30 [INF] Executed action AuthNet.Controllers.UsersController.GetAll (HmsNet) in 259.1789ms
2025-07-22 15:17:00.890 +05:30 [INF] Executed endpoint 'AuthNet.Controllers.UsersController.GetAll (HmsNet)'
2025-07-22 15:17:00.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/Users - 200 null application/json; charset=utf-8 275.6237ms
2025-07-22 15:36:07.773 +05:30 [WRN] No store type was specified for the decimal property 'DiscountAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'FinalAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'TaxAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'Rate' on entity type 'Item'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'Rate' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:07.805 +05:30 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.376 +05:30 [WRN] No store type was specified for the decimal property 'DiscountAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'FinalAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'TaxAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Bill'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'Rate' on entity type 'Item'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'Rate' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:19.406 +05:30 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-22 15:36:20.045 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 15:36:20.063 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-22 15:36:20.094 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-22 15:36:20.174 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-22 15:36:20.184 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-22 15:36:20.186 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-22 15:36:20.196 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-22 15:36:20.209 +05:30 [INF] Applying migration '20250722100608_HMSTables'.
2025-07-22 15:36:20.259 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Items] (
    [ItemId] int NOT NULL IDENTITY,
    [ItemName] nvarchar(max) NOT NULL,
    [Category] nvarchar(max) NOT NULL,
    [Rate] decimal(18,2) NOT NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Items] PRIMARY KEY ([ItemId])
);
2025-07-22 15:36:20.263 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Rooms] (
    [RoomId] int NOT NULL IDENTITY,
    [RoomName] nvarchar(max) NOT NULL,
    [RoomType] nvarchar(max) NOT NULL,
    [Capacity] int NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Rooms] PRIMARY KEY ([RoomId])
);
2025-07-22 15:36:20.272 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [OrderId] int NOT NULL IDENTITY,
    [RoomId] int NOT NULL,
    [OrderDateTime] datetime2 NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([OrderId]),
    CONSTRAINT [FK_Orders_Rooms_RoomId] FOREIGN KEY ([RoomId]) REFERENCES [Rooms] ([RoomId]) ON DELETE CASCADE
);
2025-07-22 15:36:20.277 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Bills] (
    [BillId] int NOT NULL IDENTITY,
    [OrderId] int NOT NULL,
    [BillDateTime] datetime2 NOT NULL,
    [TotalAmount] decimal(18,2) NOT NULL,
    [DiscountAmount] decimal(18,2) NOT NULL,
    [TaxAmount] decimal(18,2) NOT NULL,
    [FinalAmount] decimal(18,2) NOT NULL,
    [PaymentStatus] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Bills] PRIMARY KEY ([BillId]),
    CONSTRAINT [FK_Bills_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([OrderId]) ON DELETE CASCADE
);
2025-07-22 15:36:20.285 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderDetails] (
    [OrderDetailId] int NOT NULL IDENTITY,
    [OrderId] int NOT NULL,
    [ItemId] int NOT NULL,
    [Quantity] int NOT NULL,
    [Rate] decimal(18,2) NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    CONSTRAINT [PK_OrderDetails] PRIMARY KEY ([OrderDetailId]),
    CONSTRAINT [FK_OrderDetails_Items_ItemId] FOREIGN KEY ([ItemId]) REFERENCES [Items] ([ItemId]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetails_Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([OrderId]) ON DELETE CASCADE
);
2025-07-22 15:36:20.291 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [TransactionId] int NOT NULL IDENTITY,
    [BillId] int NOT NULL,
    [TransactionDateTime] datetime2 NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [PaymentMethod] nvarchar(max) NOT NULL,
    [TransactionStatus] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([TransactionId]),
    CONSTRAINT [FK_Transactions_Bills_BillId] FOREIGN KEY ([BillId]) REFERENCES [Bills] ([BillId]) ON DELETE CASCADE
);
2025-07-22 15:36:20.313 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Bills_OrderId] ON [Bills] ([OrderId]);
2025-07-22 15:36:20.317 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetails_ItemId] ON [OrderDetails] ([ItemId]);
2025-07-22 15:36:20.321 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetails_OrderId] ON [OrderDetails] ([OrderId]);
2025-07-22 15:36:20.324 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_RoomId] ON [Orders] ([RoomId]);
2025-07-22 15:36:20.326 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_BillId] ON [Transactions] ([BillId]);
2025-07-22 15:36:20.328 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250722100608_HMSTables', N'9.0.7');
2025-07-22 15:36:20.338 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
